---
title: 【MySQL】索引（Index）
date: 2019-03-15 20:10:34
tags:
  - mysql
category:
  - 【MySQL相关】
---

#### 1.定义：帮助MySQL高效获取数据的**数据结构**

- 目的在于提高查询效率。类似字典
- 排好序的快速查找数据结构（影响查找和排序）
  - 数据库系统还维护着满足特定查找算法的数据结构
- 索引一般是指B树（多路搜索树，并不一定是二叉树）结构组织的索引

<!-- more -->

#### 2.优势：

- 提高数据检索的效率，降低数据库IO成本
- 通过索引列队数据进行排序，降低数据排序的成本，降低CPU的消耗

#### 3.劣势：

- 实际上索引也是一张表，该表保存了逐渐与索引字段，并指向实体表的记录，索引列也是要占用空间的
- 虽然索引大大提高了查询速度，但是会降低更新表的速度，如对表进行INSERT、UPDATE、DELETE。 (因为更新表时，不仅要保存数据，还要保存索引文件每次更新添加了索引列的字段)
- 索引只是提高效率的一个因素，如果有大数据量的表，就需要花时间研究建立最优秀的索引，或优化查询

#### 4.索引分类：

- 单值索引：一个索引只包含单个列，一个表可以有多个单列索引
- 唯一索引：索引列的值必须唯一，但允许有空值
- 复合索引：一个索引包含多个列

#### 5.基本语法：

(1)创建

`CREATE [UNIQUE] INDEX indexName ON mytable(columnname(length))`

`ALTER mytable ADD [UNIQUE] INDEX [indexName] ON (columnname(length))`

```sql
select * from user where name='';
-- 单值索引
create index idx_user_name on user(name)
-- 复合索引
create index idx_user_nameEmail on user(name.email)
```

索引名称规范：：`idx_`+'表名'+'字段名'

(2)删除

`DROP INDEX [indexName] ON mytable;`

(3)查看

`SHOW INDEX FROM table_name\G`

#### 6.索引结构

- BTree索引
    - 原理分析
- Hash索引
- full-text全文索引
- R-Tree索引

#### 7.适合建索引情况

- 主键自动建立唯一索引
- 频繁作为查询条件的字段
- 查询中与其他表关联的字段，外键关系建立索引
- 单键/组合索引的选择问题（高并发下倾向创建组合索引）
- 查询中排序的字段，排序字段若通过索引去访问將大大提高排序速度
- 查询中统计或者分组字段

#### 8.不适合创建索引情况

- 表记录太少
- 频繁更新的字段不适合建索引（每次更新都需要同步更新索引）
- where条件里用不到的字段不创建索引
- 数据重复且分布平均的表字段不适合建索引（如果某个数据列包含许多重复的内容，为它创建索引就没有太大的实际效果）
